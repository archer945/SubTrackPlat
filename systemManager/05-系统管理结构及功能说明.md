# 05-系统管理结构及功能说明

## 页面概述
系统管理模块是平台的基础管理功能，包含用户管理、角色管理、菜单管理、部门管理等子模块，采用左右布局设计，左侧为功能导航菜单，右侧为具体的管理内容区域。

## 页面结构

### 1. 用户管理

![用户管理](../线框图/用户管理.png)

### 2. 角色管理
![角色管理](../线框图/角色管理.png)

### 3. 菜单管理
![菜单管理](../线框图/菜单管理.png)

### 4. 部门管理

![部门管理](../线框图/部门管理.jpg)

## 功能特性

### 5.1 用户管理功能
1. **用户信息管理**: 创建、编辑、删除用户账号
2. **密码管理**: 重置用户密码、强制修改密码
3. **状态管理**: 启用、禁用用户账号
4. **角色分配**: 为用户分配一个或多个角色
5. **部门分配**: 设置用户所属部门
6. **批量操作**: 批量导入、导出、删除用户
7. **登录日志**: 查看用户登录历史记录

### 5.2 角色管理功能
1. **角色定义**: 创建、编辑、删除系统角色
2. **权限分配**: 为角色分配功能权限和数据权限
3. **权限继承**: 支持角色权限的继承关系
4. **用户关联**: 查看角色下的用户列表
5. **权限预览**: 查看角色的完整权限列表
6. **角色复制**: 基于现有角色创建新角色

### 5.3 菜单管理功能
1. **菜单树管理**: 维护系统的菜单树形结构
2. **菜单类型**: 支持目录、菜单、按钮三种类型
3. **路由配置**: 配置前端路由和组件路径
4. **图标设置**: 为菜单设置显示图标
5. **排序管理**: 调整菜单的显示顺序
6. **权限控制**: 设置菜单的访问权限
7. **状态管理**: 启用、禁用菜单项

### 5.4 部门管理功能
1. **组织架构**: 维护企业组织架构树
2. **部门信息**: 管理部门基本信息
3. **层级关系**: 设置部门的上下级关系
4. **负责人设置**: 指定部门负责人
5. **人员统计**: 统计部门下的人员数量
6. **部门权限**: 设置部门的数据权限范围

## 数据字段定义

### 6.1 用户信息字段
- **用户ID**: 系统唯一标识
- **用户名**: 登录用户名（唯一）
- **姓名**: 用户真实姓名
- **邮箱**: 电子邮箱地址
- **手机号**: 联系电话
- **部门ID**: 所属部门标识
- **角色列表**: 用户拥有的角色
- **状态**: 正常、禁用、锁定
- **最后登录时间**: 上次登录时间
- **创建时间**: 账号创建时间

### 6.2 角色信息字段
- **角色ID**: 系统唯一标识
- **角色名称**: 角色的显示名称
- **角色编码**: 角色的编码标识
- **角色描述**: 角色的详细说明
- **权限列表**: 角色拥有的权限
- **数据权限**: 数据访问范围（全部、本部门、仅本人）
- **状态**: 启用、禁用
- **创建时间**: 角色创建时间

### 6.3 菜单信息字段
- **菜单ID**: 系统唯一标识
- **菜单名称**: 菜单显示名称
- **父菜单ID**: 父级菜单标识
- **菜单类型**: 目录（M）、菜单（C）、按钮（F）
- **路由地址**: 前端路由路径
- **组件路径**: Vue组件路径
- **权限标识**: 权限验证字符串
- **菜单图标**: 显示图标
- **显示顺序**: 排序号
- **是否显示**: 是否在菜单中显示
- **状态**: 正常、停用

### 6.4 部门信息字段
- **部门ID**: 系统唯一标识
- **部门名称**: 部门显示名称
- **部门编码**: 部门编码标识
- **父部门ID**: 父级部门标识
- **负责人**: 部门负责人姓名
- **联系电话**: 部门联系电话
- **邮箱地址**: 部门邮箱
- **显示顺序**: 排序号
- **状态**: 正常、停用
- **创建时间**: 部门创建时间

## 权限控制机制

### 7.1 功能权限
- **菜单权限**: 控制用户能访问哪些菜单页面
- **按钮权限**: 控制页面内的操作按钮显示
- **接口权限**: 控制后端API的访问权限

### 7.2 数据权限
- **全部数据**: 可以查看所有数据
- **本部门数据**: 只能查看本部门及下级部门数据
- **本人数据**: 只能查看自己创建的数据

### 7.3 权限验证流程
1. 用户登录后获取角色信息
2. 根据角色获取权限列表
3. 前端路由守卫验证页面权限
4. 组件级别验证按钮权限
5. 后端接口验证API权限
6. 数据查询时应用数据权限过滤

## 业务规则

### 8.1 用户管理规则
- 用户名必须唯一且不能修改
- 超级管理员账号不能被删除或禁用
- 用户必须至少分配一个角色
- 禁用用户会自动退出系统
- 密码必须符合安全策略要求

### 8.2 角色管理规则
- 角色名称和编码必须唯一
- 内置角色不能被删除
- 删除角色前需要解除用户关联
- 权限修改后立即生效
- 支持角色的权限继承

### 8.3 菜单管理规则
- 菜单名称在同级必须唯一
- 删除父菜单会同时删除子菜单
- 停用父菜单会同时停用子菜单
- 按钮类型菜单必须有父菜单
- 路由地址必须唯一

### 8.4 部门管理规则
- 部门名称在同级必须唯一
- 不能删除有用户的部门
- 删除部门会同时删除子部门
- 部门负责人必须是本部门用户
- 部门层级不能超过5级

## 技术实现要点

### 9.1 前端技术
- **树形组件**: 用于部门和菜单的树形展示
- **权限指令**: Vue指令实现按钮级权限控制
- **路由守卫**: 实现页面级权限验证
- **状态管理**: 全局存储用户权限信息

### 9.2 后端技术

- **Spring Boot 框架**：构建统一的后端服务，提供稳定的接口支撑。
- **Spring Security + JWT**：实现用户身份认证与接口权限控制，支持 Token 续签与过期处理。
- **MyBatis-Plus**：简化数据库访问，支持分页、条件构造器等功能。
- **数据权限控制**：基于角色与部门进行数据范围过滤，实现本人、本部门、部门及以下等策略。
- **权限注解机制**：通过自定义注解结合 AOP 实现接口权限与数据权限的统一校验。